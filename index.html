<!DOCTYPE html>
<html lang="pt">
<head>
  <meta charset="UTF-8" />
  <title>Voos Ativos</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <link
    rel="stylesheet"
    href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"
  />
  <style>
    #map {
      height: 100vh;
    }
    .plane-icon {
      transform-origin: center center;
    }
  </style>
</head>
<body>
  <div id="map"></div>

  <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
  <script>
    const map = L.map("map").setView([47, -2], 5); // Centro aproximado da Europa

    L.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png", {
      attribution: "© OpenStreetMap contributors",
    }).addTo(map);

    // Função para criar ícone rotacionado
    function createRotatedIcon(angle) {
      return L.divIcon({
        className: "plane-icon",
        html: `<img src="https://upload.wikimedia.org/wikipedia/commons/e/e0/Airplane_silhouette.png" style="width:30px; transform: rotate(${angle}deg);" />`,
        iconSize: [30, 30],
        iconAnchor: [15, 15],
      });
    }

    // Dados dos voos
    const flights = [
      {
        callsign: "RUK677D",
        country: "United Kingdom",
        lat: 49.5953,
        lon: -4.0248,
        altitude: 10973,
        speed: 242,
        heading: 10,
      },
      {
        callsign: "TAP828",
        country: "Portugal",
        lat: 44.4172,
        lon: 3.2699,
        altitude: 10973,
        speed: 235,
        heading: 62,
      },
    ];

    // Adiciona cada avião ao mapa
    flights.forEach((flight) => {
      const marker = L.marker([flight.lat, flight.lon], {
        icon: createRotatedIcon(flight.heading),
      }).addTo(map);

      marker.bindPopup(`
        <strong>${flight.callsign}</strong><br/>
        País: ${flight.country}<br/>
        Altitude: ${flight.altitude} m<br/>
        Velocidade: ${flight.speed} m/s<br/>
        Direção: ${flight.heading}°
      `);
    });
  </script>
</body>
</html>